

@if (User.Identity.IsAuthenticated)
{

    <div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="checkoutModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="checkoutModalLabel">Detalles de Envío y Pago</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="checkoutForm">
                        <div class="mb-3">
                            <label for="direccion" class="form-label">Dirección</label>
                            <input type="text" class="form-control bg-dark text-white" id="direccion" required>
                            <div class="invalid-feedback" id="direccionError">Por favor ingrese una dirección.</div>
                        </div>
                        <div class="mb-3">
                            <label for="canton" class="form-label">Cantón</label>
                            <input type="text" class="form-control bg-dark text-white" id="canton" required>
                            <div class="invalid-feedback" id="cantonError">Por favor ingrese un cantón.</div>
                        </div>
                        <div class="mb-3">
                            <label for="provincia" class="form-label">Provincia</label>
                            <input type="text" class="form-control bg-dark text-white" id="provincia" required>
                            <div class="invalid-feedback" id="provinciaError">Por favor ingrese una provincia.</div>
                        </div>
                        <div class="mb-3">
                            <label for="codigoPostal" class="form-label">Código Postal</label>
                            <input type="text" class="form-control bg-dark text-white" id="codigoPostal" required>
                            <div class="invalid-feedback" id="codigoPostalError">Por favor ingrese un código postal.</div>
                        </div>
                        <div class="mb-3">
                            <label for="tipoPago" class="form-label">Tipo de Pago</label>
                            <select class="form-select bg-dark text-white" id="tipoPago" required>
                                <option value="">Seleccionar...</option>
                                <option value="tarjeta">Tarjeta</option>
                                <option value="efectivo">Efectivo</option>
                            </select>
                            <div class="invalid-feedback" id="tipoPagoError">Por favor seleccione un tipo de pago.</div>
                        </div>
                        <div class="mb-3" id="tarjetaContainer" style="display: none;">
                            <label for="numeroTarjeta" class="form-label">Número de Tarjeta</label>
                            <input type="text" class="form-control bg-dark text-white" id="numeroTarjeta">
                            <div class="invalid-feedback" id="numeroTarjetaError">Por favor ingrese un número de tarjeta.</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="validarFormulario()">Finalizar Compra</button>
                </div>
            </div>
        </div>
    </div>





        <div class="my-5 migajas">
            <div class="container">
                <div class="my-5 align-items-center">
                    <div class="py-5">
                        <p>Inicio / <span>Carrito de Compras</span></p>
                        <h1>Carrito de Compras</h1>
                    </div>
                </div>
            </div>
        </div>

        <div class="container my-5">
            <div class="row">
                <div class="col-lg-8">
                    <table class="table">
                        <thead class="text-white">
                            <tr>
                                <th scope="col">Producto</th>
                                <th scope="col" class="text-center">Precio</th>
                                <th scope="col" class="text-center">Cantidad</th>
                                <th scope="col" class="text-center">Total</th>
                                <th scope="col" class="text-center">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="carrito-body">
                            <tr id="carrito-template" style="display: none;">
                                <td>
                                    <div class="d-flex align-items-center">
                                        <img src="" class="img-fluid mr-3" style="max-width: 80px; height: auto; object-fit: cover;">
                                        <div>
                                            <h5 class="p-2 text-white"></h5>
                                        </div>
                                    </div>
                                </td>
                                <td class="align-middle text-white"></td>
                                <td class="align-middle">
                                    <input type="number" class="form-control text-center" min="1">
                                </td>
                                <td class="align-middle text-white"></td>
                                <td class="align-middle">
                                    <button class="btn btn-danger btn-sm">Eliminar</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">Resumen de la Compra</h4>
                                <p class="card-text">Subtotal: <span id="subtotal"></span></p>
                                <p class="card-text">IVA: <span id="iva"></span></p>
                            <h5 class="card-title">Total: <span id="total"></span></h5>
                            <div class="d-flex ">
                                <button class="btn btn-primary" id="pagarButton" data-bs-toggle="modal" data-bs-target="#checkoutModal" style="margin-right: 5px;">Proceder al Pago</button>
                                <a href="@Url.Action("Tienda")" class="btn btn-secondary">Seguir Comprando</a>
                            </div>
                       
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="~/js/Carrito.js"></script>
}else
{
    <div class="d-flex justify-content-center mb-3 mt-3">
        <p class="mb-0">Para acceder al carrito, debes estar logueado</p>
      
    </div>
    <div class="d-flex flex-column justify-content-center align-items-center">
        <div class="mb-2">
            <a href="/Logueo" >Iniciar Sesión</a>
        </div>
        <div>
            <a href="/Logueo/Registro" >Registrarse</a>
        </div>
    </div>
}
